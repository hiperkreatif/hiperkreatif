---
import BaseLayout from "../layouts/BaseLayout.astro";
import LogoUrl from "../assets/logo-black.svg?url";
import { SEO } from "../constants/seo";
import { SERVICES } from "../constants/services";
import { FAQS } from "../constants/faqs";
import Button from "../components/Button.astro";
import Hero from "../components/Hero.astro";

// Pakai URL langsung untuk JSON-LD
const logo = LogoUrl;
---

<BaseLayout>
  <div class="max-w-6xl mx-auto">
    <Hero
      badge={SEO.badgeTitle}
      headline={SEO.headline}
      description={SEO.description}
      primaryButtonText="Jadwalkan Konsultasi"
      secondaryButtonText="Chat WhatsApp"
      primaryButtonLink="#consult"
      secondaryButtonLink="https://wa.me/6285157445924"
      secondaryButtonTarget="_blank"
      secondaryButtonRel="noopener noreferrer"
    />

    <!-- SERVICES -->
    <section id="services" class="px-6 mt-12" aria-labelledby="services-title">
      <div class="flex items-center justify-between gap-4 mb-6">
        <h2 id="services-title" class="text-3xl font-bold text-gray-900">
          Layanan Unggulan
        </h2>
        <a
          href="#consult"
          class="text-sm font-medium text-gray-900 underline decoration-2 underline-offset-4"
          >Butuh Spesifik? Konsultasi</a
        >
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {
          SERVICES.map((s) => (
            <div class="service-card group bg-white rounded-2xl p-6 border-2 border-gray-100 hover:border-gray-900 transition focus-within:outline-2 focus-within:outline-gray-900">
              <div class="inline-flex items-center gap-2 text-[10px] font-semibold px-2 py-1 rounded-full bg-gray-900 text-white mb-2">
                {s.badge}
              </div>
              <h3 class="text-xl font-semibold text-gray-900">{s.name}</h3>
              <p class="text-gray-700 mt-2">{s.tagline}</p>

              <ul class="mt-4 space-y-2 text-gray-800">
                {s.bullets.map((b) => (
                  <li class="flex gap-3 items-start leading-6">
                    <span
                      aria-hidden="true"
                      class="inline-block shrink-0 h-1.5 w-1.5 rounded-full bg-gray-900 translate-y-1"
                    />
                    <span class="text-sm">{b}</span>
                  </li>
                ))}
              </ul>

              <Button
                variant="ghost"
                text="Pelajari & daftar ->"
                href={s.cta}
              />
            </div>
          ))
        }
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" class="px-6 mt-12" aria-labelledby="process-title">
      <div class="bg-white rounded-2xl p-6 border-2 border-gray-100">
        <div class="flex items-center justify-between gap-4 mb-6">
          <h2 id="process-title" class="text-3xl font-bold text-gray-900">
            Proses Kerja
          </h2>
          <a
            href="#consult"
            class="text-sm font-medium text-gray-900 underline decoration-2 underline-offset-4"
            >Mulai konsultasi</a
          >
        </div>

        <ol class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
          <li class="rounded-2xl border-2 border-gray-100 p-6 bg-white">
            <div
              class="h-9 w-9 rounded-full bg-gray-900 text-white flex items-center justify-center font-bold mb-3"
            >
              1
            </div>
            <h3 class="font-semibold text-gray-900">Diagnosa Singkat</h3>
            <p class="text-sm text-gray-700 mt-1">
              Call 20–30 menit: goal, hambatan, prioritas 30 hari.
            </p>
          </li>
          <li class="rounded-2xl border-2 border-gray-100 p-6 bg-white">
            <div
              class="h-9 w-9 rounded-full bg-gray-900 text-white flex items-center justify-center font-bold mb-3"
            >
              2
            </div>
            <h3 class="font-semibold text-gray-900">Rencana & Scope</h3>
            <p class="text-sm text-gray-700 mt-1">
              Dokumen singkat: deliverable, timeline, biaya.
            </p>
          </li>
          <li class="rounded-2xl border-2 border-gray-100 p-6 bg-white">
            <div
              class="h-9 w-9 rounded-full bg-gray-900 text-white flex items-center justify-center font-bold mb-3"
            >
              3
            </div>
            <h3 class="font-semibold text-gray-900">Build & Iterasi</h3>
            <p class="text-sm text-gray-700 mt-1">
              Sprint cepat + demo mingguan, revisi minor on the fly.
            </p>
          </li>
          <li class="rounded-2xl border-2 border-gray-100 p-6 bg-white">
            <div
              class="h-9 w-9 rounded-full bg-gray-900 text-white flex items-center justify-center font-bold mb-3"
            >
              4
            </div>
            <h3 class="font-semibold text-gray-900">Go-Live & Support</h3>
            <p class="text-sm text-gray-700 mt-1">
              Launch terukur, dokumentasi, 7–30 hari support.
            </p>
          </li>
        </ol>

        <div class="mt-6 rounded-xl border-2 border-gray-100 p-4 bg-gray-50">
          <p class="text-sm text-gray-800">
            Jaminan tenang: revisi minor 7 hari pasca go-live + SLA respon 48
            jam kerja untuk issue kritis.
          </p>
        </div>
      </div>
    </section>

    <!-- GUARANTEE -->
    <section id="guarantee" class="px-6 mt-8" aria-labelledby="guarantee-title">
      <div class="bg-white rounded-2xl p-5 border-2 border-gray-900">
        <h2 id="guarantee-title" class="sr-only">Garansi</h2>
        <p class="text-sm md:text-base text-gray-900 text-center">
          <span class="font-semibold">Garansi:</span> uang muka <strong
            >full refund</strong
          > jika draft wireframe tidak terkirim dalam <strong
            >7 hari kerja</strong
          >. Free fix 7 hari pasca go-live untuk bug minor.
        </p>
      </div>
    </section>

    <!-- FAQ: single column on mobile, 2 columns on md+ -->
    <section id="faq" class="px-6 mt-12" aria-labelledby="faq-title">
      <div class="bg-white rounded-2xl p-6 border-2 border-gray-100">
        <h2 id="faq-title" class="text-3xl font-bold text-gray-900 mb-6">
          FAQ
        </h2>

        <!-- Wrapper: single column on mobile, grid 2-col on md+ -->
        <div
          class="grid grid-cols-1 md:grid-cols-2 gap-4"
          role="list"
        >
          {
            FAQS.map((f, index) => (
              <div class="overflow-hidden">
                <details class="rounded-xl border border-gray-200 p-4 bg-white w-full">
                  <summary class="font-semibold text-gray-900 cursor-pointer list-none flex justify-between items-center">
                    {f.q}
                  </summary>
                  <p class="mt-2 text-sm text-gray-700 pt-2">{f.a}</p>
                </details>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- DOCUMENT GENERATOR LINK -->
    <!-- <section class="px-6 mt-12">
      <div class="bg-white rounded-2xl p-6 border-2 border-gray-100 text-center">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Document Generator</h2>
        <p class="text-gray-700 mb-6">Buat dokumen profesional seperti quotation, invoice, kontrak, dan lainnya</p>
        <a
          href="/documents"
          class="inline-flex items-center gap-2 h-12 px-6 rounded-full border-2 border-gray-900 bg-gray-900 text-white font-semibold transition-all duration-300 hover:shadow-xl"
        >
          Akses Document Generator
          <span aria-hidden="true">→</span>
        </a>
      </div>
    </section> -->

    <!-- CONSULT FORM -->
    <section
      id="consult"
      class="scroll-mt-24 px-6 mt-12 mb-20"
      aria-labelledby="consult-title"
    >
      <div class="bg-white rounded-2xl border-2 border-gray-100">
        <div class="p-6 border-b border-gray-100">
          <h2 id="consult-title" class="text-3xl font-bold text-gray-900 mb-2">
            Konsultasi Cepat
          </h2>
          <p class="text-gray-700">
            Isi singkat dan jelas. Saya balas dengan rencana teknis + estimasi
            waktu.
          </p>
        </div>

        <form
          method="POST"
          action="/api/consult"
          class="p-6 space-y-8"
          novalidate
        >
          <!-- Honeypot -->
          <input
            type="text"
            name="website"
            class="hidden"
            tabindex="-1"
            autocomplete="off"
          />
          <!-- Time-trap -->
          <input type="hidden" name="submitted_at" value={Date.now()} />

          <!-- Info Kontak -->
          <fieldset class="space-y-4">
            <legend class="text-sm font-semibold text-gray-900 mb-2"
              >Info Kontak</legend
            >
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label
                  for="name"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  Nama lengkap <span class="text-red-600">*</span>
                </label>
                <input
                  id="name"
                  name="name"
                  type="text"
                  required
                  autocomplete="name"
                  placeholder="Nama lengkap"
                  class="formc w-full px-4 py-3 rounded-xl border-2 border-gray-200 bg-white placeholder:text-gray-400 focus:outline-none focus:border-black"
                />
              </div>
              <div>
                <label
                  for="email"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  Email <span class="text-red-600">*</span>
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  required
                  autocomplete="email"
                  placeholder="email@bisnis.com"
                  class="formc w-full px-4 py-3 rounded-xl border-2 border-gray-200 bg-white placeholder:text-gray-400 focus:outline-none focus:border-black"
                />
              </div>
              <div>
                <label
                  for="whatsapp"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  WhatsApp <span class="text-red-600">*</span>
                </label>
                <input
                  id="whatsapp"
                  name="whatsapp"
                  type="tel"
                  inputmode="tel"
                  required
                  autocomplete="tel"
                  pattern="^\+?\d{6,15}$"
                  placeholder="+62…"
                  class="formc w-full px-4 py-3 rounded-xl border-2 border-gray-200 bg-white placeholder:text-gray-400 focus:outline-none focus:border-black"
                />
                <p class="mt-1 text-xs text-gray-500">
                  Gunakan format internasional untuk mempermudah.
                </p>
              </div>
              <div>
                <label
                  for="company"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  Nama Bisnis/Brand <span class="text-red-600">*</span>
                </label>
                <input
                  id="company"
                  name="company"
                  type="text"
                  required
                  autocomplete="organization"
                  placeholder="Nama Bisnis/Brand"
                  class="formc w-full px-4 py-3 rounded-xl border-2 border-gray-200 bg-white placeholder:text-gray-400 focus:outline-none focus:border-black"
                />
              </div>
            </div>
          </fieldset>

          <!-- Kebutuhan Proyek -->
          <fieldset class="space-y-4 mt-4">
            <legend class="text-sm font-semibold text-gray-900 mb-2"
              >Kebutuhan Proyek</legend
            >
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div>
                <label
                  for="scope"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  Scope Utama <span class="text-red-600">*</span>
                </label>
                <select
                  id="scope"
                  name="scope"
                  required
                  class="formc w-full px-4 py-3 pr-10 rounded-xl border-2 border-gray-200 bg-white appearance-none focus:outline-none focus:border-black"
                >
                  <option value="">Pilih scope</option>
                  <option value="web">Website</option>
                  <option value="mobile">Mobile App</option>
                  <option value="web_mobile">Website + Mobile</option>
                </select>
              </div>

              <div>
                <label
                  for="ai_needs"
                  class="block text-sm font-medium text-gray-900 mb-1"
                  >AI Needs</label
                >
                <select
                  id="ai_needs"
                  name="ai_needs"
                  class="formc w-full px-4 py-3 pr-10 rounded-xl border-2 border-gray-200 bg-white appearance-none focus:outline-none focus:border-black"
                >
                  <option value="">Pilih kebutuhan AI</option>
                  <option value="cs">CS WhatsApp 24/7</option>
                  <option value="reco">Rekomendasi Produk</option>
                  <option value="mktg">Marketing Automation</option>
                  <option value="finance">Finance Assist</option>
                </select>
              </div>

              <div>
                <label
                  for="monthly_revenue"
                  class="block text-sm font-medium text-gray-900 mb-1"
                >
                  Omzet Bulanan <span class="text-red-600">*</span>
                </label>
                <select
                  id="monthly_revenue"
                  name="monthly_revenue"
                  required
                  class="formc w-full px-4 py-3 pr-10 rounded-xl border-2 border-gray-200 bg-white appearance-none focus:outline-none focus:border-black"
                >
                  <option value="">Pilih omzet</option>
                  <option value="lt_10">&lt; 10 juta</option>
                  <option value="10_50">10–50 juta</option>
                  <option value="50_200">50–200 juta</option>
                  <option value="gt_200">&gt; 200 juta</option>
                </select>
              </div>
            </div>

            <div>
              <label
                for="notes"
                class="block text-sm font-medium text-gray-900 mb-1"
              >
                Catatan <span class="text-red-600">*</span>
              </label>
              <textarea
                id="notes"
                name="notes"
                required
                rows={5}
                placeholder="Problem utama & target 1–2 bulan ke depan…"
                class="formc w-full px-4 py-3 rounded-xl border-2 border-gray-200 bg-white placeholder:text-gray-400 focus:outline-none focus:border-black"
              ></textarea>
              <p class="mt-1 text-xs text-gray-500">
                Contoh: “Migrasi dari marketplace, target 20 order/hari.”
              </p>
            </div>
          </fieldset>

          <!-- Persetujuan & Submit -->
          <div class="space-y-4">
            <label class="flex items-start gap-3">
              <input
                id="agree"
                name="agree"
                type="checkbox"
                required
                class="mt-1 h-4 w-4 rounded border-gray-300 text-gray-900 focus:outline-none"
              />
              <span class="text-sm text-gray-700"
                >Setuju dihubungi terkait konsultasi & penawaran.</span
              >
            </label>

            <Button
              variant="primary"
              size="lg"
              type="submit"
              text="Kirim Brief Singkat"
              className="w-full"
            />

            <div class="text-xs text-gray-500">
              Data aman, tanpa spam. Balasan biasanya &lt; 48 jam kerja.
            </div>
          </div>
        </form>
      </div>
    </section>
  </div>

  <!-- JSON-LD @graph tetap di head -->
  <script
    type="application/ld+json"
    slot="head"
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "@id": "https://www.hiperkreatif.com/#website",
          url: "https://www.hiperkreatif.com/",
          name: "Hiperkreatif",
          alternateName: ["Hiperkreatif", "hiperkreatif.com"],
          publisher: { "@id": "https://www.hiperkreatif.com/#org" },
          inLanguage: "id-ID",
        },
        {
          "@type": "Organization",
          "@id": "https://www.hiperkreatif.com/#org",
          name: "Hiperkreatif",
          url: "https://www.hiperkreatif.com",
          logo: {
            "@type": "ImageObject",
            url: logo,
            width: 112,
            height: 112,
          },
          sameAs: [
            "https://github.com/hiperkreatif",
            "https://wa.me/6285157445924",
          ],
          contactPoint: [
            {
              "@type": "ContactPoint",
              contactType: "customer support",
              telephone: "+62-800-0000-0000",
              email: "hi@hiperkreatif.com",
            },
          ],
          founder: { "@id": "https://www.hiperkreatif.com/#person" },
        },
        {
          "@type": "Person",
          "@id": "https://www.hiperkreatif.com/#person",
          name: "Kang Dadan",
          url: "https://www.hiperkreatif.com",
          jobTitle: "Software Engineer & Solo Founder",
          image: "https://www.hiperkreatif.com/dadan.jpg",
          sameAs: [
            "https://github.com/hiperkreatif",
            "https://wa.me/6285157445924",
          ],
          worksFor: { "@id": "https://www.hiperkreatif.com/#org" },
        },
        {
          "@type": "WebPage",
          "@id": "https://www.hiperkreatif.com/#webpage",
          url: "https://www.hiperkreatif.com/",
          name: SEO.title,
          description: SEO.description,
          inLanguage: "id-ID",
          isPartOf: { "@id": "https://www.hiperkreatif.com/#website" },
          about: { "@id": "https://www.hiperkreatif.com/#org" },
          primaryImageOfPage: {
            "@type": "ImageObject",
            url: `https://www.hiperkreatif.com${SEO.ogImage || "/og-cover-1200x630.jpg"}`,
            width: 1200,
            height: 630,
          },
        },
      ],
    })}
  />
</BaseLayout>
